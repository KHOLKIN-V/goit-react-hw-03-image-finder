{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","App.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","service/mapper.js","service/fetchApi.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","mapper","imgs","map","id","webformatURL","largeImageURL","fetchApi","onSearch","page","axios","get","then","r","data","hits","propTypes","PropTypes","string","isRequired","number","Searchbar","state","searchQuery","imageChange","e","setState","target","value","toLowerCase","imageSubmit","preventDefault","trim","props","onSubmit","toast","warn","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","className","cs","SearchForm","this","type","SearchFormBtn","SearchFormBtnLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","openImage","onClick","src","alt","ImageGalleryItemImage","ImageGallery","Button","rootModal","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","currentTarget","console","log","window","addEventListener","removeEventListener","createPortal","Overlay","children","React","PureComponent","App","images","error","status","viewModal","modalImage","getImages","query","prevState","catch","message","finally","scrollTo","top","documentElement","scrollHeight","behavior","loadMore","formSubmit","toggleModal","prevProps","prevQuery","prevPage","style","fontWeight","fontSize","textAlign","color","height","width","timeout","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fb76c992.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__cjpKz\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1gqdx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__FYWg_\",\"Modal\":\"Modal_Modal__zGTtQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3ppfO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3OC3i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3pNAP\"};","export const mapper = (imgs) => {\r\n\treturn imgs.map(({ id, webformatURL, largeImageURL }) => ({\r\n\t\tid, webformatURL, largeImageURL\r\n\t}));\r\n};","// import { createClient } from 'pexels';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst fetchApi = (onSearch, page) => {\r\n    const KEY = '23540071-e77d0cd4225c02caa21321106';\r\n    const BASE_URL = 'https://pixabay.com/api/';\r\n    return axios.get(`${BASE_URL}?q=${onSearch}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`).then(r => r.data.hits);\r\n};\r\n\r\n// const fetchApi = (onSearch, page) => {\r\n//     const client = createClient('563492ad6f9170000100000187edd7a1e3164e24b88262e5ea6f2f2b');\r\n//     const query = onSearch;\r\n\r\n//     return client.photos.search({ query, page: page, per_page: 12 }).then(photos => photos.json());\r\n// };\r\n\r\n// const fetchApi = (onSearch, page) => {\r\n//     const KEY = 'a92e1c28ff5839246667e5b68c28f141';\r\n//     const BASE_URL = 'https://api.themoviedb.org/3/';\r\n//     const language = 'en-US';\r\n//     return axios.get(`${BASE_URL}search/movie?api_key=${KEY}&language=${language}&page=${page}&per_page=12&include_adult=false&query=${onSearch}`).then(r => r.data.results);\r\n// };\r\nfetchApi.propTypes = {\r\n    onSearch: PropTypes.string.isRequired,\r\n    page: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default fetchApi;\r\n","import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport cs from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n\r\n  state = {\r\n    searchQuery: \"\",\r\n  };\r\n\r\n  imageChange = (e) => {\r\n    this.setState({ searchQuery: e.target.value.toLowerCase() });\r\n  };\r\n\r\n  imageSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (this.state.searchQuery.trim() === \"\") {\r\n      toast.warn(\"Введите запрос!\", {\r\n        position: \"top-right\",\r\n        autoClose: 2000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.searchQuery);\r\n    this.setState({ searchQuery: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <header className={cs.Searchbar}>\r\n          <form className={cs.SearchForm} onSubmit={this.imageSubmit}>\r\n            <button type=\"submit\" className={cs.SearchFormBtn}>\r\n              <span className={cs.SearchFormBtnLabel}>Search</span>\r\n            </button>\r\n\r\n            <input\r\n              className={cs.SearchFormInput}\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              autoFocus\r\n              placeholder=\"Search images and photos\"\r\n              onChange={this.imageChange}\r\n            />\r\n          </form>\r\n        </header>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport cs from \"./ImageGalleryItem.module.css\";\r\n// import Modal from \"../Modal/Modal\";\r\n\r\nconst ImageGalleryItem = ({ webformatURL, id, openImage, largeImageURL }) => {\r\n  return (\r\n    <li\r\n      className={cs.ImageGalleryItem}\r\n      key={id}\r\n      onClick={() => {\r\n        openImage(largeImageURL);\r\n      }}\r\n    >\r\n      <img src={webformatURL} alt=\"\" className={cs.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  id: PropTypes.number.isRequired,\r\n  largeImageURL: PropTypes.string.isRequired,\r\n  openImage: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport cs from \"./ImageGallery.module.css\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ onSearch, openImage }) => {\r\n  return (\r\n    <>\r\n      <ul className={cs.ImageGallery}>\r\n        {onSearch.map(({ webformatURL, id, largeImageURL }) => (\r\n          <>\r\n            <ImageGalleryItem\r\n              webformatURL={webformatURL}\r\n              id={id}\r\n              largeImageURL={largeImageURL}\r\n              openImage={openImage}\r\n            />\r\n          </>\r\n        ))}\r\n      </ul>\r\n    </>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  openImage: PropTypes.func.isRequired,\r\n  onSearch: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      webformatURL: PropTypes.string.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n    })\r\n  ),\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport cs from \"./Button.module.css\";\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <>\r\n      <button type=\"button\" className={cs.Button} onClick={onClick}>\r\n        Load more\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport cs from \"./Modal.module.css\";\r\n\r\nconst rootModal = document.querySelector(\"#rootModal\");\r\n\r\nclass Modal extends React.PureComponent {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    src: PropTypes.string.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log(\"component did mount\");\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    console.log(\"component will unmount\");\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={cs.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={cs.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      rootModal\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport cs from './App.module.css';\r\nimport { mapper } from \"./service/mapper\";\r\nimport fetchApi from \"./service/fetchApi\";\r\nimport Searchbar from './components/Searchbar/Searchbar';\r\nimport ImageGallery from './components/ImageGallery/ImageGallery';\r\nimport Button from './components/Button/Button';\r\nimport Modal from './components/Modal/Modal';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchQuery: '',\r\n    page: 1,\r\n    error: \"\",\r\n    status: \"idle\",\r\n    viewModal: false,\r\n    modalImage: \"\",\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevState.searchQuery; \r\n    const query = this.state.searchQuery;\r\n    const page = this.state.page;\r\n    const prevPage = prevState.page;\r\n\r\n    if (prevQuery !== query) {\r\n      \r\n      this.setState({ images: [] });\r\n      this.getImages(query, page);\r\n    }\r\n\r\n    if (prevPage !== page && prevPage < page) {\r\n      this.getImages(query, page);\r\n    }\r\n  }\r\n\r\n  getImages = (query, page) => {\r\n    this.setState({status: 'pending'});\r\n    fetchApi(query, page)\r\n    .then((hits) => {\r\n      this.setState(prevState => ({\r\n        images: [...prevState.images, ...mapper(hits)],\r\n        // page: prevState.page + 1,\r\n        status: 'resolved',\r\n      }));\r\n    console.log(this.state.images);\r\n    })\r\n    .catch(({message}) => this.setState({ error: message, status: 'rejected' }))\r\n    .finally(() => {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    });\r\n  };\r\n\r\n  loadMore = e => {\r\n    e.preventDefault();\r\n    let { page } = this.state;\r\n    page += 1;\r\n    this.setState({ page });\r\n  }\r\n\r\n  formSubmit = query => {\r\n    this.setState({searchQuery: query, page: 1});\r\n  }\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ viewModal }) => ({\r\n      viewModal: !viewModal,\r\n    }));\r\n  };\r\n\r\n  openImage = (modalImage) => {\r\n    this.setState({modalImage});\r\n    this.toggleModal();\r\n  }\r\n  \r\n  render() {\r\n    const {status, images, error, page, modalImage, viewModal} = this.state;\r\n\r\n    return (\r\n      <>\r\n      <div className={cs.App}>\r\n        <Searchbar onSubmit={this.formSubmit}/>\r\n        {(status === 'idle') &&\r\n          <div style={{fontWeight: '500', fontSize: '30px', textAlign: 'center'}}>Введите название</div>\r\n        }\r\n        {(status === \"pending\") && \r\n          <Loader\r\n            type=\"Puff\"\r\n             color=\"#00BFFF\"\r\n             height={100}\r\n             width={100}\r\n             timeout={3000} //3 secs\r\n          />\r\n        }\r\n        {(status === 'rejected') &&\r\n          <div style={{fontWeight: '700', fontSize: '50px', textAlign: 'center'}}>{error}</div>\r\n        }\r\n        {(status === 'resolved') && \r\n          <ImageGallery onSearch={images} openImage={this.openImage} />        \r\n        }\r\n        {(images.length > 0) && \r\n            <Button onClick={this.loadMore} page={page} />\r\n        }\r\n        {viewModal && (\r\n          <Modal onClose={this.toggleModal}>\r\n            <img src={modalImage} alt='' />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__WNXtq\",\"SearchForm\":\"Searchbar_SearchForm__3-7f3\",\"SearchFormBtn\":\"Searchbar_SearchFormBtn__qwK8A\",\"SearchFormBtnLabel\":\"Searchbar_SearchFormBtnLabel__-SdeH\",\"SearchFormInput\":\"Searchbar_SearchFormInput__4G00w\"};"],"sourceRoot":""}